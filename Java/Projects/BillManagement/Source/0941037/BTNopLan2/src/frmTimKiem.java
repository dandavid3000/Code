/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * frmTimKiem.java
 *
 * Created on Oct 1, 2010, 12:25:44 PM
 */

/**
 *
 * @author Dan
 */

public class frmTimKiem extends javax.swing.JFrame {

    /** Creates new form frmTimKiem */
    public frmTimKiem() {
        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        chbMaPT = new javax.swing.JCheckBox();
        chbNgayThu = new javax.swing.JCheckBox();
        chbSoTien = new javax.swing.JCheckBox();
        chbLyDo = new javax.swing.JCheckBox();
        chbGhiChu = new javax.swing.JCheckBox();
        txtMaPT = new javax.swing.JTextField();
        jLabel5 = new javax.swing.JLabel();
        txtNgayThu = new javax.swing.JTextField();
        txtSoTien = new javax.swing.JTextField();
        txtLyDo = new javax.swing.JTextField();
        txtGhiChu = new javax.swing.JTextField();
        jScrollPane1 = new javax.swing.JScrollPane();
        tbTimKiem = new javax.swing.JTable();
        btnTimKiem = new javax.swing.JButton();
        btnXoaBang = new javax.swing.JButton();
        txtMovePhieuThu = new javax.swing.JToggleButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowOpened(java.awt.event.WindowEvent evt) {
                formWindowOpened(evt);
            }
        });

        chbMaPT.setText("Mã PT");
        chbMaPT.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                chbMaPTMouseClicked(evt);
            }
        });
        chbMaPT.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                chbMaPTActionPerformed(evt);
            }
        });
        chbMaPT.addHierarchyListener(new java.awt.event.HierarchyListener() {
            public void hierarchyChanged(java.awt.event.HierarchyEvent evt) {
                chbMaPTHierarchyChanged(evt);
            }
        });

        chbNgayThu.setText("Ngày thu");
        chbNgayThu.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                chbNgayThuMouseClicked(evt);
            }
        });

        chbSoTien.setText("Số tiền");
        chbSoTien.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                chbSoTienMouseClicked(evt);
            }
        });

        chbLyDo.setText("Lý do");
        chbLyDo.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                chbLyDoMouseClicked(evt);
            }
        });
        chbLyDo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                chbLyDoActionPerformed(evt);
            }
        });

        chbGhiChu.setText("Ghi chú");
        chbGhiChu.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                chbGhiChuMouseClicked(evt);
            }
        });

        txtMaPT.setEnabled(false);
        txtMaPT.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtMaPTActionPerformed(evt);
            }
        });

        jLabel5.setFont(new java.awt.Font("Tahoma", 1, 36)); // NOI18N
        jLabel5.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel5.setText("Tìm kiếm phiếu thu");
        jLabel5.setAlignmentX(0.5F);

        txtNgayThu.setEnabled(false);

        txtSoTien.setEnabled(false);

        txtLyDo.setEnabled(false);

        txtGhiChu.setEnabled(false);

        tbTimKiem.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null}
            },
            new String [] {
                "Mã PT", "Ngày thu", "Số tiền", "Lý do thu", "Ghi chú"
            }
        ));
        jScrollPane1.setViewportView(tbTimKiem);

        btnTimKiem.setText("Tìm kiếm");
        btnTimKiem.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btnTimKiemMouseClicked(evt);
            }
        });

        btnXoaBang.setText("Xóa bảng");
        btnXoaBang.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btnXoaBangMouseClicked(evt);
            }
        });

        txtMovePhieuThu.setBackground(new java.awt.Color(153, 255, 153));
        txtMovePhieuThu.setText("=> Phiếu Thu");
        txtMovePhieuThu.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                txtMovePhieuThuMouseClicked(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addGap(28, 28, 28)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(chbSoTien)
                                    .addComponent(chbNgayThu)
                                    .addComponent(chbMaPT)
                                    .addComponent(chbLyDo)
                                    .addComponent(chbGhiChu))
                                .addGap(18, 18, 18)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(txtMaPT, javax.swing.GroupLayout.DEFAULT_SIZE, 119, Short.MAX_VALUE)
                                    .addComponent(txtLyDo)
                                    .addComponent(txtSoTien)
                                    .addComponent(txtNgayThu, javax.swing.GroupLayout.DEFAULT_SIZE, 119, Short.MAX_VALUE)
                                    .addComponent(txtGhiChu)))
                            .addGroup(layout.createSequentialGroup()
                                .addGap(61, 61, 61)
                                .addComponent(btnTimKiem)
                                .addGap(18, 18, 18)
                                .addComponent(btnXoaBang)))
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addGap(26, 26, 26)
                                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 370, Short.MAX_VALUE))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(txtMovePhieuThu)
                                .addGap(31, 31, 31))))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(138, 138, 138)
                        .addComponent(jLabel5)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel5)
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(chbMaPT)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(chbNgayThu))
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(txtMaPT, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(txtNgayThu, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(chbSoTien)
                            .addComponent(txtSoTien, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(chbLyDo)
                            .addComponent(txtLyDo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(chbGhiChu)
                            .addComponent(txtGhiChu, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(btnTimKiem)
                            .addComponent(btnXoaBang)))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 164, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtMovePhieuThu)))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void chbLyDoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_chbLyDoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_chbLyDoActionPerformed

    private void chbMaPTHierarchyChanged(java.awt.event.HierarchyEvent evt) {//GEN-FIRST:event_chbMaPTHierarchyChanged
        
    }//GEN-LAST:event_chbMaPTHierarchyChanged

    private void txtMaPTActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtMaPTActionPerformed
      // if(chbMaPT.enable(true))
    }//GEN-LAST:event_txtMaPTActionPerformed

    private void chbMaPTActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_chbMaPTActionPerformed

    }//GEN-LAST:event_chbMaPTActionPerformed

    private void chbMaPTMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_chbMaPTMouseClicked
        // TODO add your handling code here:
        if(chbMaPT.isSelected())
            txtMaPT.setEnabled(true);
        else
        {
            txtMaPT.setEnabled(false);
            txtMaPT.setText("");
        }
    }//GEN-LAST:event_chbMaPTMouseClicked

    private void chbNgayThuMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_chbNgayThuMouseClicked
        // TODO add your handling code here:
        if(chbNgayThu.isSelected())
            txtNgayThu.setEnabled(true);
        else
        {
            txtNgayThu.setEnabled(false);
            txtNgayThu.setText("");
        }
    }//GEN-LAST:event_chbNgayThuMouseClicked

    private void chbSoTienMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_chbSoTienMouseClicked
        // TODO add your handling code here:
        if(chbSoTien.isSelected())
            txtSoTien.setEnabled(true);
        else
        {
            txtSoTien.setEnabled(false);
            txtSoTien.setText("");
        }
    }//GEN-LAST:event_chbSoTienMouseClicked

    private void chbLyDoMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_chbLyDoMouseClicked
        // TODO add your handling code here:
        if(chbLyDo.isSelected())
            txtLyDo.setEnabled(true);
        else
        {
            txtLyDo.setEnabled(false);
            txtLyDo.setText("");
        }
    }//GEN-LAST:event_chbLyDoMouseClicked

    private void chbGhiChuMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_chbGhiChuMouseClicked
        // TODO add your handling code here:
        if(chbGhiChu.isSelected())
            txtGhiChu.setEnabled(true);
        else
        {
            txtGhiChu.setEnabled(false);
            txtGhiChu.setText("");
        }
    }//GEN-LAST:event_chbGhiChuMouseClicked
      private void RenewTablePhieuThu()
    {

        tbTimKiem.setModel(new javax.swing.table.DefaultTableModel(
        new Object [][] {
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null},
        {null, null, null, null, null}
    },
            new String [] {
                "Mã PT", "Ngày thu", "Số tiền", "Lý do thu", "Ghi chú"
            }
        ));



        jScrollPane1.setViewportView(tbTimKiem);
    }

    private void LoadPhieuThu()
    {
        RenewTablePhieuThu();

        database dan = new database();
        dan.DuLieu=dan.ConnectDatabase("select * from PhieuThu ");
        int i =0;
        while(i<dan.n)
        {
            tbTimKiem.setValueAt(dan.DuLieu[i][0], i, 0);
            tbTimKiem.setValueAt(dan.DuLieu[i][1], i, 1);
            tbTimKiem.setValueAt(dan.DuLieu[i][2], i, 2);
            tbTimKiem.setValueAt(dan.DuLieu[i][3], i, 3);
            tbTimKiem.setValueAt(dan.DuLieu[i][4], i, 4);
            i++;
         }
    }
    private void btnTimKiemMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnTimKiemMouseClicked
        // Tim kiem
        //Nho bat try cat cho ngay 
        RenewTablePhieuThu();
        String sql="select * from PhieuThu where ";
             
        if(!txtMaPT.getText().equals(""))
            sql = sql + "MaPT="+txtMaPT.getText()+"" ;

        if(!txtNgayThu.getText().equals("") && txtMaPT.getText().equals("") )
            sql = sql + "NgayThu LIKE '"+txtNgayThu.getText()+"'" ;
        if(!txtNgayThu.getText().equals("") && !txtMaPT.getText().equals("") )
            sql = sql + " AND NgayThu LIKE '"+txtNgayThu.getText()+"'" ;

        if(!txtSoTien.getText().equals("") && txtMaPT.getText().equals("") && txtNgayThu.getText().equals("")  )
            sql = sql + "SoTien = "+txtSoTien.getText()+"" ;
        if(!txtSoTien.getText().equals("") && (!txtMaPT.getText().equals("") || !txtNgayThu.getText().equals("")) )
            sql = sql + " AND SoTien = "+txtSoTien.getText()+"" ;

        if(!txtLyDo.getText().equals("") && txtSoTien.getText().equals("") && txtMaPT.getText().equals("") && txtNgayThu.getText().equals(""))
            sql = sql + "LyDoThu LIKE N'"+txtLyDo.getText()+"'" ;
        if(!txtLyDo.getText().equals("") && (!txtSoTien.getText().equals("") || !txtMaPT.getText().equals("") || !txtNgayThu.getText().equals("")))
            sql = sql + " AND LyDoThu LIKE N'"+txtLyDo.getText()+"'" ;

        if(!txtGhiChu.getText().equals("") && txtLyDo.getText().equals("") && txtSoTien.getText().equals("") && txtMaPT.getText().equals("") && txtNgayThu.getText().equals(""))
            sql = sql + "GhiChu LIKE N'"+txtGhiChu.getText()+"'" ;
        if(!txtGhiChu.getText().equals("") && (!txtLyDo.getText().equals("") && !txtSoTien.getText().equals("") || !txtMaPT.getText().equals("") || !txtNgayThu.getText().equals("")))
            sql = sql + "AND GhiChu LIKE N'"+txtGhiChu.getText()+"'" ;

        if(txtGhiChu.getText().equals("") && txtLyDo.getText().equals("") && txtSoTien.getText().equals("") && txtMaPT.getText().equals("") && txtNgayThu.getText().equals(""))
            sql = "select * from PhieuThu";
        database dan = new database();
        dan.DuLieu=dan.ConnectDatabase(sql);

        int i =0;
        while(i<dan.n)
        {
            tbTimKiem.setValueAt(dan.DuLieu[i][0], i, 0);
            tbTimKiem.setValueAt(dan.DuLieu[i][1], i, 1);
            tbTimKiem.setValueAt(dan.DuLieu[i][2], i, 2);
            tbTimKiem.setValueAt(dan.DuLieu[i][3], i, 3);
            tbTimKiem.setValueAt(dan.DuLieu[i][4], i, 4);
            i++;
         }
    }//GEN-LAST:event_btnTimKiemMouseClicked
   
   

    private void formWindowOpened(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_formWindowOpened
        // TODO add your handling code here:
      
    }//GEN-LAST:event_formWindowOpened

    private void btnXoaBangMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnXoaBangMouseClicked
        // TODO add your handling code here:
        RenewTablePhieuThu();
    }//GEN-LAST:event_btnXoaBangMouseClicked

    private void txtMovePhieuThuMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_txtMovePhieuThuMouseClicked
        // TODO add your handling code here:
        frmPhieuThu pt = new frmPhieuThu();
        this.setVisible(false);
        pt.setVisible(true);
    }//GEN-LAST:event_txtMovePhieuThuMouseClicked

    /**
    * @param args the command line arguments
    */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new frmTimKiem().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnTimKiem;
    private javax.swing.JButton btnXoaBang;
    private javax.swing.JCheckBox chbGhiChu;
    private javax.swing.JCheckBox chbLyDo;
    private javax.swing.JCheckBox chbMaPT;
    private javax.swing.JCheckBox chbNgayThu;
    private javax.swing.JCheckBox chbSoTien;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable tbTimKiem;
    private javax.swing.JTextField txtGhiChu;
    private javax.swing.JTextField txtLyDo;
    private javax.swing.JTextField txtMaPT;
    private javax.swing.JToggleButton txtMovePhieuThu;
    private javax.swing.JTextField txtNgayThu;
    private javax.swing.JTextField txtSoTien;
    // End of variables declaration//GEN-END:variables

}
